# 実装機能の確認方法

## 🚀 アプリケーションの起動方法

### 1. 開発サーバーの起動

**ターミナルを2つ開いて、それぞれで実行：**

#### ターミナル1: APIサーバー
```bash
cd apps/api
pnpm dev
```
→ `http://localhost:3001` で起動

#### ターミナル2: Webアプリケーション
```bash
cd apps/web
pnpm dev
```
→ `http://localhost:3000` で起動

**または、ルートディレクトリから：**
```bash
# ターミナル1
pnpm dev:api

# ターミナル2
pnpm dev:web
```

---

## ✅ 実装機能の確認手順

### 1. 初回オンボーディング機能

#### 確認手順：
1. ブラウザで `http://localhost:3000` を開く
2. **新規登録**をクリック
3. メールアドレス、パスワード、ユーザーIDを入力して登録
4. 自動的に `/onboarding` ページにリダイレクトされる
5. テンプレート（勉強、筋トレ、仕事、ダイエット、生活改善）から1つ選択
6. 「○○で始める」ボタンをクリック
7. ホームページにリダイレクトされ、サンプルデータが表示される

#### 確認ポイント：
- ✅ テンプレート選択画面が表示される
- ✅ テンプレートを選択するとカテゴリが自動生成される
- ✅ サンプル活動（3件）が自動で作成される
- ✅ サンプルインサイトが生成される（オプション）

---

### 2. FABボタン（活動追加）

#### 確認手順：
1. ログイン後、どのページでも右下に「➕」ボタンが表示される
2. ボタンをクリック
3. モーダルが開き、活動作成フォームが表示される
4. 活動を入力して保存
5. 活動一覧ページにリダイレクトされる

#### 確認ポイント：
- ✅ 全ページでFABボタンが表示される
- ✅ オンボーディングページでは非表示
- ✅ モバイルでも片手で操作しやすい位置
- ✅ モーダルで活動作成フォームが表示される

---

### 3. AIインサイトのUI改善

#### 確認手順：
1. ログイン後、`/insights` ページに移動
2. インサイトを生成（期間を選択して「生成」ボタンをクリック）
3. 生成されたインサイトカードを確認

#### 確認ポイント：
- ✅ **上部**: 1行要約（✨アイコン付き）が表示される
- ✅ **中段**: 行動提案（🎯「今すぐできること」、最大2個）が表示される
- ✅ **下段**: 詳細（📊「詳細を見る」で折りたたみ可能）が表示される
- ✅ ホームページのインサイトプレビューも3階層構造になっている

---

## 🗄️ データベースの確認方法

### Prisma Studioでデータを確認

```bash
cd apps/api
npx prisma studio
```

→ ブラウザで `http://localhost:5555` が自動的に開きます

#### 確認できること：
- **User**: ユーザー情報
- **Activity**: 活動ログ（サンプルデータ含む）
- **Insight**: AIインサイト（`oneLineSummary`と`actionItems`フィールドが追加されている）
- **Category**: カテゴリ（テンプレートから生成されたもの）

---

## 🧪 各機能のテスト手順

### テスト1: 初回ユーザーのオンボーディング

1. 新しいアカウントを作成
2. オンボーディングページが表示されることを確認
3. テンプレートを選択
4. ホームページでサンプルデータが表示されることを確認

### テスト2: 既存ユーザーの動作

1. 既存アカウントでログイン
2. オンボーディングページにリダイレクトされないことを確認
3. 通常通りホームページが表示されることを確認

### テスト3: FABボタン

1. ログイン後、複数のページ（ホーム、活動一覧、インサイトなど）を移動
2. どのページでもFABボタンが表示されることを確認
3. ボタンをクリックして活動作成フォームが開くことを確認

### テスト4: AIインサイトの生成

1. 活動を数件作成
2. `/insights` ページで期間を選択
3. インサイトを生成
4. 3階層構造（要約・行動提案・詳細）が表示されることを確認

---

## 🔍 トラブルシューティング

### APIサーバーが起動しない

```bash
# ポートが使用中の場合
# .envファイルでPORTを変更
PORT=3002
```

### データベース接続エラー

```bash
# .envファイルのDATABASE_URLを確認
cd apps/api
Get-Content .env | Select-String "DATABASE_URL"
```

### フロントエンドがAPIに接続できない

```bash
# apps/web/.env.local ファイルを確認
NEXT_PUBLIC_API_URL=http://localhost:3001
```

---

## 📝 確認チェックリスト

- [ ] APIサーバーが起動している（`http://localhost:3001`）
- [ ] Webアプリが起動している（`http://localhost:3000`）
- [ ] 新規登録ができる
- [ ] オンボーディングページが表示される
- [ ] テンプレート選択ができる
- [ ] サンプルデータが生成される
- [ ] FABボタンが全ページで表示される
- [ ] FABボタンで活動作成ができる
- [ ] AIインサイトが3階層構造で表示される
- [ ] データベースに新しいフィールドが追加されている（Prisma Studioで確認）

---

## 🎯 次のステップ

実装済み機能の確認が完了したら、以下の機能に進めます：

1. **ストリーク機能**（連続記録日数）
2. **週次サマリー画面**
3. **グループの盛り上げ機能**

